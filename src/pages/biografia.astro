---
import BaseLayout from "../layouts/BaseLayout.astro";
const pageTitle = "Biografía";

const trajectoryData = [
  {
    season: "2019/20",
    club: "Cúllar Vega C.F.",
    role: "Entrenador Principal",
    icon: "whistle",
  },
  {
    season: "2017/18",
    club: "U.D. Maracena",
    role: "3ª División",
    icon: "field",
  },
  {
    season: "2016 - Actualidad",
    club: "Sporting C. Vegas del Genil",
    role: "Director de metodología",
    icon: "clipboard",
  },
  {
    season: "2016/17",
    club: "CDC Santa Fe",
    role: "1ª división andaluza: 3ª posición",
    icon: "chart",
  },
  {
    season: "2015/16",
    club: "Gabia C.F.",
    role: "Ascenso a 1ª División Andaluza",
    icon: "trophy",
  },
  {
    season: "2014/15",
    club: "Purullena C.F.",
    role: "Ascenso a División de Honor",
    icon: "trophy",
  },
  {
    season: "2012 - Actualidad",
    club: "VegaSport C&D",
    role: "Director Deportivo",
    icon: "manager",
  },
  { season: "2010/11", club: "U. D. Maracena", role: "", icon: "field" },
  {
    season: "2009/10",
    club: "Rvo. Vegas del Genil",
    role: "Ascenso",
    icon: "trophy",
  },
  {
    season: "2007/11",
    club: "Valencia C.F.",
    role: "Scouting",
    icon: "search",
  },
  {
    season: "2007/09",
    club: "Sierra Nevada Cenes",
    role: "División de honor / 1ª división andaluza",
    icon: "field",
  },
  { season: "2001/04", club: "A.D. Ceuta", role: "Analista", icon: "laptop" },
];

// Simple icon mapping (using SVGs)
const icons: Record<string, string> = {
  whistle: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>`,
  field: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="18" rx="2" ry="2"></rect><line x1="12" y1="3" x2="12" y2="21"></line><path d="M12 8a2 2 0 0 0 0 4 2 2 0 0 0 0-4z"></path><path d="M12 16a2 2 0 0 0 0 4 2 2 0 0 0 0-4z"></path></svg>`,
  clipboard: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>`,
  chart: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>`,
  trophy: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 21h8M12 17v4M7 4h10c.6 0 1 .4 1 1v7c0 2.8-2.2 5-5 5s-5-2.2-5-5V5c0-.6.4-1 1-1zM6 4H5a2 2 0 0 0-2 2v2c0 1.1.9 2 2 2h1M18 4h1a2 2 0 0 1 2 2v2c0 1.1-.9 2-2 2h-1"></path></svg>`,
  manager: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>`,
  search: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>`,
  laptop: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="2" y1="20" x2="22" y2="20"></line></svg>`,
};
---

<BaseLayout pageTitle={pageTitle}>
  <div class="container animate-fade-in">
    <div class="bio-container">
      <!-- Bio Section -->
      <section class="bio-section">
        <div class="text-content">
          <h2>Cheíto Díaz</h2>
          <p>Mi nombre es José Antonio «Cheito» Díaz.</p>
          <p>
            Nací en Ceuta en 1971, donde viví hasta 1990, cuando me trasladé a
            Granada para realizar la carrera de Ciencias Políticas y Sociología
            por la Universidad de Granada.
          </p>
          <p>
            Entrenando desde los 14 años, tras pasar un par de años como árbitro
            de fútbol sala, retomé de nuevo los campos de juego para hacer
            funciones de primer entrenador, scouting, analista, e informador.
          </p>
          <p>
            Conocedor del mundo de la representación de jugadores, a través de
            varias empresas y agentes, entre ellas GibraSports Consulting y
            colaborador en varios fichajes de jugadores en la liga inglesa entre
            otros.
          </p>
          <p>
            Con un Máster en Dirección Deportiva, actualmente ejerzo como
            Director Deportivo y compaginando como Primer Entrenador.
          </p>
        </div>
        <div class="image-content">
          <div class="sport-mask-container">
            <img
              src="/cheito-diaz1-845x684.jpg"
              alt="Cheito Díaz"
              class="sport-mask"
            />
          </div>
        </div>
      </section>

      <!-- Philosophy Section -->
      <section class="philosophy-section">
        <div class="image-content">
          <div class="sport-mask-container">
            <img
              src="/balon-cesped-845x684.jpg"
              alt="Filosofía de juego"
              class="sport-mask-reverse"
            />
          </div>
        </div>
        <div class="text-content">
          <h2>Mi filosofía</h2>
          <p>
            Me gusta el fútbol directo-elaborado, siempre en función de la
            estructura del rival y del momento del partido.
          </p>
          <p>
            Los jugadores son los intérpretes del juego al que hay que dirigir
            hacia esa toma de decisiones autónomas.
          </p>
        </div>
      </section>
    </div>
  </div>

  <!-- Full Width Trajectory Section -->
  <section class="trajectory-section-full bg-green" id="trajectory">
    <div class="container section-inner">
      <h2 class="text-center animate-on-scroll">Trayectoria Deportiva</h2>
      <div class="trajectory-grid">
        {
          trajectoryData.map((item, index) => (
            <div
              class="trajectory-item animate-on-scroll"
              style={`transition-delay: ${index * 100}ms`}
            >
              <div
                class="icon-wrapper"
                set:html={icons[item.icon] || icons.field}
              />
              <div class="info">
                <div class="season">{item.season}</div>
                <div class="club">{item.club}</div>
                {item.role && <div class="role">{item.role}</div>}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // Scroll Animation Observer
  const observerOptions = {
    threshold: 0.1,
    rootMargin: "0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("in-view");
        observer.unobserve(entry.target); // Run once
      }
    });
  }, observerOptions);

  document.querySelectorAll(".animate-on-scroll").forEach((el) => {
    observer.observe(el);
  });
</script>

<style>
  .bio-container {
    display: flex;
    flex-direction: column;
    gap: 4rem;
    padding-bottom: 4rem;
  }

  /* Bio & Philosophy Layout */
  .bio-section,
  .philosophy-section {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    align-items: center;
    padding: 2rem 0;
  }

  /* Mobile Order: Text First, then Image */
  .bio-section .text-content,
  .philosophy-section .text-content {
    order: 1;
  }

  .bio-section .image-content,
  .philosophy-section .image-content {
    order: 2;
    width: 100%; /* Ensure full width image on mobile */
  }

  @media (min-width: 768px) {
    .bio-section,
    .philosophy-section {
      flex-direction: row;
      align-items: center;
    }

    .bio-section .text-content {
      order: 1;
    }
    .bio-section .image-content {
      order: 2;
      padding-left: 2rem;
    }

    .philosophy-section .image-content {
      order: 1;
      padding-right: 2rem;
    }
    .philosophy-section .text-content {
      order: 2;
    }

    .text-content,
    .image-content {
      flex: 1;
      width: 100%;
    }
  }

  .sport-mask-container {
    filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.15));
  }

  .image-content img {
    display: block;
    width: 100%;
    height: auto;
    object-fit: cover;
    transition: transform 0.4s ease;
  }

  .image-content:hover img {
    transform: scale(1.02);
  }

  /* Mandatory Visible Masks (Shield / Crest style) */
  .sport-mask {
    clip-path: polygon(
      50% 0,
      100% 0,
      100% 85%,
      50% 100%,
      0 85%,
      0 0
    ); /* Crest Shape */
  }

  .sport-mask-reverse {
    clip-path: polygon(
      0 0,
      100% 0,
      100% 85%,
      50% 100%,
      0 85%
    ); /* Same crest shape for consistency */
  }

  .text-content h2 {
    color: var(--color-primary);
    margin-bottom: 1.5rem;
    font-size: 2.2rem;
  }

  .text-content p {
    margin-bottom: 1rem;
    font-size: 1.15rem;
    color: #444;
  }

  /* Trajectory Full Width */
  .trajectory-section-full {
    width: 100%;
    padding: 5rem 0;
    color: white;
    position: relative;
  }

  .section-inner {
    max-width: 1100px;
  }

  .trajectory-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin-top: 3rem;
  }

  @media (min-width: 768px) {
    .trajectory-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .trajectory-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .trajectory-item {
    background: rgba(255, 255, 255, 0.08); /* Glass effect dark */
    padding: 1.5rem;
    border-radius: 8px; /* Slight rounding for cards */
    border-left: 4px solid var(--color-accent); /* Green/Gold accent */
    display: flex;
    flex-direction: column;
    gap: 1rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }

  .trajectory-item:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
  }

  .icon-wrapper {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-accent);
  }

  .icon-wrapper :global(svg) {
    width: 20px;
    height: 20px;
  }

  .season {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    color: var(--color-accent);
    font-weight: 700;
    letter-spacing: 0.5px;
    margin-bottom: 0.5rem;
  }

  .club {
    font-weight: 700;
    font-size: 1.15rem;
    margin-bottom: 0.25rem;
    line-height: 1.3;
  }

  .role {
    font-size: 0.95rem;
    opacity: 0.9;
    font-weight: 400;
  }

  /* Scroll Animations */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }

  .animate-on-scroll.in-view {
    opacity: 1;
    transform: translateY(0);
  }
</style>
